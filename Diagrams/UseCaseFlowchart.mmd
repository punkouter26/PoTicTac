flowchart TD
    Start([User Opens App]) --> EnterName[Enter Player Name]
    EnterName --> SelectMode{Select Game Mode}
    
    SelectMode -->|Single Player| SelectDifficulty[Select AI Difficulty<br/>Easy/Medium/Hard]
    SelectMode -->|Multiplayer| JoinLobby[Join/Create<br/>Multiplayer Lobby]
    
    SelectDifficulty --> StartGame[Initialize Game<br/>6x6 Board]
    JoinLobby --> WaitForPlayer[Wait for Opponent]
    WaitForPlayer --> StartGame
    
    StartGame --> PlayerTurn{Is Player's Turn?}
    
    PlayerTurn -->|Yes| SelectCell[Click Available Cell]
    PlayerTurn -->|No - Multiplayer| WaitMove[Wait for Opponent Move]
    PlayerTurn -->|No - Single Player| AITurn[AI Calculates Move]
    
    SelectCell --> ValidateMove{Valid Move?}
    WaitMove --> UpdateBoard
    AITurn --> UpdateBoard[Update Game Board]
    
    ValidateMove -->|No| ShowError[Show Error Message]
    ShowError --> PlayerTurn
    
    ValidateMove -->|Yes| UpdateBoard
    UpdateBoard --> CheckWinner{Check Game Status}
    
    CheckWinner -->|Continue Playing| CheckMode{Game Mode?}
    CheckMode -->|Single Player| AITurn
    CheckMode -->|Multiplayer| PlayerTurn
    
    CheckWinner -->|4 in a Row - Player Wins| PlayerWins[Display Win Message<br/>Highlight Winning Pattern]
    CheckWinner -->|4 in a Row - AI/Opponent Wins| OpponentWins[Display Loss Message<br/>Highlight Winning Pattern]
    CheckWinner -->|Board Full - Draw| DrawGame[Display Draw Message]
    
    PlayerWins --> UpdateStats[Update Player Statistics<br/>Increment Wins, Win Streak]
    OpponentWins --> UpdateStats2[Update Player Statistics<br/>Increment Losses, Reset Streak]
    DrawGame --> UpdateStats3[Update Player Statistics<br/>Increment Draws]
    
    UpdateStats --> SaveToAzure[Save Stats to<br/>Azure Table Storage]
    UpdateStats2 --> SaveToAzure
    UpdateStats3 --> SaveToAzure
    
    SaveToAzure --> ShowOptions{What Next?}
    
    ShowOptions -->|Play Again| CheckMode2{Same Mode?}
    ShowOptions -->|View Stats| ViewStats[Navigate to<br/>Statistics Page]
    ShowOptions -->|Main Menu| ReturnMenu[Return to Main Menu]
    
    CheckMode2 -->|Yes - Same Settings| StartGame
    CheckMode2 -->|No - Change Settings| SelectMode
    
    ViewStats --> DisplayStats[Display Statistics Grid<br/>Win Rate, Leaderboard]
    DisplayStats --> ShowOptions2{What Next?}
    
    ShowOptions2 -->|Play Again| SelectMode
    ShowOptions2 -->|Stay on Stats| DisplayStats
    
    ReturnMenu --> SelectMode
    
    style Start fill:#32cd32,stroke:#000,stroke-width:2px,color:#000
    style PlayerWins fill:#00ff00,stroke:#000,stroke-width:2px,color:#000
    style OpponentWins fill:#ff6347,stroke:#000,stroke-width:2px,color:#fff
    style DrawGame fill:#ffa500,stroke:#000,stroke-width:2px,color:#000
    style SaveToAzure fill:#00d4ff,stroke:#000,stroke-width:2px,color:#000
    style DisplayStats fill:#9370db,stroke:#000,stroke-width:2px,color:#fff
